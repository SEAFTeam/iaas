entities:
  seaf.ta.reverse.cloud_ru.enterprise.vms:
    presentations:
      list:
        type: table
        headers:
          - value: id
            text: ID
          - value: name
            text: Имя сервера
            sortable: true
            align: left
            link: vm_link
            width: 300
          - value: os_type
            text: ОС
            sortable: true
            align: center
            width: 200
          - value: os_bit
            text: Разрядность
            sortable: true
            align: left
          - value: av
            text: Наличие антивируса
            sortable: true
            align: left
          - value: edr
            text: Наличие EDR агента
            sortable: true
            align: left
          - value: cpu_qty
            text: Процессор (ядра)
            align: left
          - value: ram
            text: ОЗУ (Гб)
            align: left
            sortable: true
          - value: disks
            text: Диски
            align: left
            width: 200
          - value: nic_qty
            text: Сетевые адаптеры
            align: left
          - value: addresses
            text: IP адреса
            align: left
          - value: vapp
            text: vApp
            align: left
            width: 200
            link: vapp_link
          - value: subnet
            text: Subnet
            align: left
            width: 200
          - value: az
            text: Зона доступности
            align: left
            width: 200
          - value: flavor
            text: Спецификация
            align: left
          - value: tags
            text: Теги
            align: left
            width: 300
          - value: vdc
            text: VDC
            link: vdc_link
          - value: tenant
            text: Тенант
          - value: dc
            text: Датацентр
        source: > 
          (
              $domain := $params.domain;
              $dataset := $$;
              $tmp := $reverse_enterprise_vms($dataset, $domain);
              $tmp ~> | $ | {'edr': (edr = true ? '✅' : '❌'), 'av': (av = true ? '✅' : '❌')  } |
          )

      card:
        type: markdown
        template: templates/vm_card.md
        source: >
          (
              $id := $params.id;
              $dataset := $$;
              $reverse_enterprise_vms($dataset)[id = $id]
          )